<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="DigitalCrafts Alumni Registry">
    <meta name="author" content="Eric Schow">
    <title>DigitalCrafts Alumni Registry</title>
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css' rel="stylesheet">
    <script src='https://code.jquery.com/jquery-3.2.1.min.js'></script>
    <link href="./css/main.css" rel="stylesheet" type="text/css">
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
  </head>
  <body>
    <div id='app'>
      <header>
        <nav class="navbar navbar-default">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand centered" href="#">
                <img src="/img/DigitalCrafts-Logo-Wrench.png"
                alt='DigitalCrafts wrench logo'
                width="45px">
              </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <!--
                <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="#">Separated link</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="#">One more separated link</a></li>
                  </ul>
                </li>
              -->
              </ul>
            <!--
              // search bar
              <form class="navbar-form navbar-left">
                <div class="form-group">
                  <input type="text" class="form-control" placeholder="Search">
                </div>
                <button type="submit" class="btn btn-default">Submit</button>
              </form>
            -->
              <ul class="nav navbar-nav navbar-right">
                <li><a href="http://digitalcrafts.com" target="_blank">DigitalCrafts Home Page</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Account <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="#">Separated link</a></li>
                  </ul>
                </li>
              </ul>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </header>
      <content class='container-fluid' style='margin: 0 30rem 0 3rem'>
        <!-- <div class='row'>
          <div class='col-xs-6'>hello</div>
          <div class='col-xs-6'>hello 2</div>
        </div> -->
        <studentslist></studentslist>
      </content>
    </div>
  </body>
  <script src="https://unpkg.com/vue"></script>
  <script>

  var s1 = {name: 'Eric',
    description: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'}
  var s2 = {name: 'Frank',
    description: 'Two exquisite objection delighted deficient yet its contained. Cordial because are account evident its subject but eat. Can properly followed learning prepared you doubtful yet him. Over many our good lady feet ask that. Expenses own moderate day fat trifling stronger sir domestic feelings. Itself at be answer always exeter up do. Though or my plenty uneasy do. Friendship so considered remarkably be to sentiments. Offered mention greater fifteen one promise because nor. Why denoting speaking fat indulged saw dwelling raillery. '}
  var s3 = {name: 'John Stevens',
    description: 'Village did removed enjoyed explain nor ham saw calling talking. Securing as informed declared or margaret. Joy horrible moreover man feelings own shy. Request norland neither mistake for yet. Between the for morning assured country believe. On even feet time have an no at. Relation so in confined smallest children unpacked delicate. Why sir end believe uncivil respect. Always get adieus nature day course for common. My little garret repair to desire he esteem. '}
  var s4 = {name: 'Steven Wilson',
    description: 'To sorry world an at do spoil along. Incommode he depending do frankness remainder to. Edward day almost active him friend thirty piqued. People as period twenty my extent as. Set was better abroad ham plenty secure had horses. Admiration has sir decisively excellence say everything inhabiting acceptance. Sooner settle add put you sudden him. '}

  studentsGlob = [s1, s2, s3, s4]
  // quickly add lots of students
  studentsGlob.map((student)=>{studentsGlob.push(student);studentsGlob.push(student);studentsGlob.push(student);studentsGlob.push(student);studentsGlob.push(student)})
  console.log('studentsGlob prior to vue init: ', studentsGlob)

  Vue.component('studentslist', {
    template: `<div id='studentContainer'>
        <alum-row
        v-for="row in rows"
        :key='rows.indexOf(row)'
        :students='rows[rows.indexOf(row)]'></alum-row>
      </div>`,
    data: function() {return {
      students: [],
      rows: []
    }},
    // computed: {
    //   rows: this.getRows()
    // },
    created: function() {
        // console.log('created')
        console.log(studentsGlob)
        this.students = studentsGlob; // to be replaced by DB call
        // console.log(this.students)
        this.getRows()
    },
    methods: {
      getStudent: function() {
        let stud = this.students.shift();
        console.log('getting student ', stud, this.students.length, this.students)
        return stud
      },
      getRows: function() {
        console.log(this)
        let total = Math.ceil(this.students.length/3);
        console.log('getting rows: total ', total)
        for (let i = 0; i < total; i++){
          this.rows.push([this.getStudent(), this.getStudent(), this.getStudent()])
          console.log(this.rows)
        }
      }
    }
  })
  Vue.component('alum-row', {
    template: `<div class='row'>
      <alum
      v-for='student in students'
      :student=student
      ></alum>
      </div>`,
    props: ['students'],
    computed: {
      studentsComputed: function(){
        return [this.students[0], this.students[1], this.students[2]]
      }
    }
  })
  Vue.component('alum', {
    template: `<div class="col-xs-4 alum-container"><div class='alum'>
    <h4>{{student.name}}</h4>
    <hr class='orange1'>
    <p>{{student.description}}</p>
    </div></div>
    `,
    props: ['student']
  })

  // var app = new Vue({
  //   el: '#app',
  // })
  const app = new Vue({
    el: '#app'
  })

  </script>
</html>
